<!DOCTYPE html>
{% load static %}
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>To-Do List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-indigo-100 min-h-screen flex flex-col items-center p-8 font-sans">

  <h1 class="text-5xl font-extrabold text-indigo-700 mb-12 drop-shadow-lg">
    My To-Do List
  </h1>

  <form action="{% url 'add_task' %}" method="POST" class="mb-10 w-full max-w-lg flex shadow-lg rounded-lg overflow-hidden bg-white">
    {% csrf_token %}
    <input
      type="text"
      name="title"
      placeholder="Add new task..."
      class="flex-grow px-5 py-4 text-lg border-none focus:ring-0 focus:outline-none"
      required
    />
    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-8 transition duration-300">
      Add
    </button>
  </form>

  <ul class="w-full max-w-lg space-y-4">
    {% for task in tasks %}
      <li class="w-full">
        <div class="relative">
          <a href="{% url 'task_detail' task.id %}" 
             class="block bg-white rounded-xl shadow-md p-4 pr-20
               transition transform hover:scale-[1.02] hover:shadow-xl cursor-pointer
               {% if task.completed %}opacity-60 line-through text-gray-400{% endif %}">
            
            <div class="text-lg select-none">{{ task.title }}</div>
            
            <!-- Task Info -->
            <div class="mt-2 text-sm text-gray-600 space-y-1">
              {% if task.due_date %}
                <div class="flex items-center space-x-1">
                  <span>📅</span>
                  <span>Due: {{ task.due_date|date:"M j, Y, g:i a" }}</span>
                </div>
              {% endif %}
              
              {% if task.categories.all %}
                <div class="flex items-center space-x-1">
                  <span>🏷️</span>
                  <div class="flex space-x-1">
                    {% for category in task.categories.all %}
                      <span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full text-xs">
                        {{ category.name }}
                      </span>
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </div>
          </a>
          
          <!-- Action buttons positioned absolutely -->
          <div class="absolute top-4 right-4 flex space-x-4">
            <a href="{% url 'toggle_task' task.id %}"
               class="text-green-600 hover:text-green-800 transition transform hover:scale-110 z-10"
               title="Toggle complete">
              ✔️
            </a>
            <a href="{% url 'delete_task' task.id %}"
               class="text-red-600 hover:text-red-800 transition transform hover:scale-110 z-10"
               title="Delete task">
              🗑️
            </a>
          </div>
        </div>
      </li>
    {% empty %}
      <li class="text-center text-gray-500 text-lg py-10 bg-white rounded-xl shadow-md">
        No tasks yet.
      </li>
    {% endfor %}
  </ul>

  <a href="{% url 'home' %}"
     class="mt-12 inline-block px-8 py-3 bg-indigo-100 text-indigo-700 rounded-full shadow-md hover:bg-indigo-200 hover:shadow-lg transition font-semibold">
    ← Back to homepage
  </a>

</body>
</html>
